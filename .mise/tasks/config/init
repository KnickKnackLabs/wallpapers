#!/usr/bin/env bash
#MISE description="Initialize config file with example workspaces"
set -e

CONFIG_DIR="$HOME/.config/wallpapers"
CONFIG_FILE="$CONFIG_DIR/config.json"

# Check if config already exists
if [ -f "$CONFIG_FILE" ]; then
    if ! gum confirm "Config already exists at $CONFIG_FILE. Overwrite?"; then
        gum style --foreground 226 "âš ï¸  Cancelled"
        exit 0
    fi
fi

# Create config directory
mkdir -p "$CONFIG_DIR"

# Write template config
cat > "$CONFIG_FILE" << 'EOF'
{
  "workspaces": [
    {
      "name": "Personal",
      "description": "Life admin & side projects",
      "bgColor": "#2d3436"
    },
    {
      "name": "Work",
      "description": "Primary workspace",
      "bgColor": "#0984e3"
    },
    {
      "name": "Skydiving ðŸª‚",
      "id": "skydiving",
      "description": "DZ planning & logbook",
      "bgColor": "#6c5ce7"
    }
  ],
  "defaults": {
    "bgColor": "#000000",
    "textColor": "#ffffff"
  }
}
EOF

gum style --foreground 46 "âœ… Config created at $CONFIG_FILE"
gum style --foreground 245 "Edit with: mise run config:edit"
