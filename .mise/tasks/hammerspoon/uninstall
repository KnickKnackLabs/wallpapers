#!/usr/bin/env bash
#MISE description="Uninstall Hammerspoon and remove wp config"
set -e

APP_PATH="/Applications/Hammerspoon.app"
CONFIG_DIR="$HOME/.hammerspoon"

echo "Hammerspoon Uninstall"
echo ""

# Stop Hammerspoon if running
if pgrep -x "Hammerspoon" > /dev/null; then
    echo "Stopping Hammerspoon..."
    pkill -x Hammerspoon || true
    sleep 1
fi

# Remove app
if [ -d "$APP_PATH" ]; then
    echo "Removing $APP_PATH..."
    rm -rf "$APP_PATH"
    echo "  Removed"
else
    echo "App not installed"
fi

# Remove config
if [ -d "$CONFIG_DIR" ]; then
    echo "Removing $CONFIG_DIR..."
    rm -rf "$CONFIG_DIR"
    echo "  Removed"
else
    echo "Config not found"
fi

echo ""
echo "Hammerspoon uninstalled"
echo ""
echo "Note: Accessibility permissions may still show Hammerspoon in System Settings."
echo "You can remove it manually from Privacy & Security > Accessibility."
